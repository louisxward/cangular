services:
 frontend:
  container_name: frontend
  restart: unless-stopped
  build: /opt/cangular
  ports:
   - '80:80'
  volumes:
   # Cangular files
   - /opt/cangular:/app
   - /opt/cangular/node_modules:/app/node_modules
   # Static
   - /opt/static:/var/www/html
   # Proxy
   - /opt/cangular/nginx.conf:/etc/nginx/conf.d/default.conf:ro
   # Logging
   - /var/log/frontend:/var/log/nginx
  networks:
   - app-network
  command: ['nginx', '-g', 'daemon off;']

 backend:
  container_name: backend
  restart: unless-stopped
  build: ../backend
  ports:
   - '8090:8090'
  volumes:
   - /opt/data:/pb/pb_data
  networks:
   - app-network

networks:
 app-network:
